<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Skill Tree System</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Uncial+Antiqua&family=Cinzel:wght@400;600&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Cinzel', serif;
            background: linear-gradient(135deg, #0f0f23, #1a1a2e, #16213e);
            color: #fff;
            min-height: 100vh;
            padding: 2rem;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .title {
            text-align: center;
            font-family: 'Uncial Antiqua', cursive;
            font-size: 2.5rem;
            margin-bottom: 2rem;
            color: #fff;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
        }

        .admin-panel {
            background: linear-gradient(135deg, 
                rgba(139, 69, 19, 0.9), 
                rgba(101, 67, 33, 0.7));
            border: 3px solid #8B4513;
            border-radius: 15px;
            padding: 2rem;
            backdrop-filter: blur(10px);
            box-shadow: 0 0 30px rgba(139, 69, 19, 0.5);
        }

        .login-section {
            text-align: center;
            margin-bottom: 2rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            color: #FFD700;
            margin-bottom: 0.5rem;
            font-weight: bold;
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #8B4513;
            border-radius: 8px;
            background-color: rgba(0, 0, 0, 0.7);
            color: #fff;
            font-size: 16px;
        }

        .form-group input:focus {
            outline: none;
            border-color: #FFD700;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .button {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            font-family: 'Cinzel', serif;
        }

        .button.primary {
            background: linear-gradient(135deg, #228b22, #32cd32);
            color: #fff;
        }

        .button.primary:hover {
            background: linear-gradient(135deg, #32cd32, #228b22);
            box-shadow: 0 0 15px rgba(50, 205, 50, 0.4);
            transform: translateY(-2px);
        }

        .button.danger {
            background: linear-gradient(135deg, #8b0000, #cd5c5c);
            color: #fff;
        }

        .button.danger:hover {
            background: linear-gradient(135deg, #cd5c5c, #8b0000);
            box-shadow: 0 0 15px rgba(205, 92, 92, 0.4);
            transform: translateY(-2px);
        }

        .admin-content {
            display: none;
        }

        .admin-content.visible {
            display: block;
        }

        .points-display {
            text-align: center;
            margin: 2rem 0;
            font-size: 1.5rem;
        }

        .current-points {
            font-size: 2.5rem;
            color: #FFD700;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .points-controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 2rem 0;
        }

        .points-input {
            width: 150px;
            text-align: center;
        }

        .success-message, .error-message {
            text-align: center;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 8px;
            font-weight: bold;
        }

        .success-message {
            background: rgba(34, 139, 34, 0.3);
            border: 2px solid #228b22;
            color: #90EE90;
        }

        .error-message {
            background: rgba(139, 0, 0, 0.3);
            border: 2px solid #8b0000;
            color: #FFB6C1;
        }

        .back-link {
            display: inline-block;
            margin-top: 2rem;
            padding: 12px 24px;
            background: linear-gradient(135deg, #1e90ff, #4682b4);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .back-link:hover {
            background: linear-gradient(135deg, #4682b4, #1e90ff);
            box-shadow: 0 0 15px rgba(135, 206, 235, 0.4);
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="title">ADMIN PANEL</h1>
        
        <div class="admin-panel">
            <!-- Login Section -->
            <div class="login-section" id="login-section">
                <h2>Administrator Access</h2>
                <div class="form-group">
                    <label for="admin-password">Password:</label>
                    <input type="password" id="admin-password" placeholder="Enter admin password">
                </div>
                <button class="button primary" onclick="login()">LOGIN</button>
                <div id="login-error" class="error-message" style="display: none;"></div>
            </div>

            <!-- Admin Content -->
            <div class="admin-content" id="admin-content">
                <h2>Global Points Management</h2>
                
                <div class="points-display">
                    <p>Current Global Points:</p>
                    <div class="current-points" id="current-points">0</div>
                </div>

                <div class="points-controls">
                    <input type="number" id="points-input" class="points-input" placeholder="Amount" min="0" max="1000">
                    <button class="button primary" onclick="addPoints()">ADD POINTS</button>
                    <button class="button primary" onclick="setPoints()">SET POINTS</button>
                    <button class="button danger" onclick="resetPoints()">RESET TO 0</button>
                </div>

                <div id="success-message" class="success-message" style="display: none;"></div>
                <div id="error-message" class="error-message" style="display: none;"></div>

                <hr style="margin: 2rem 0; border: 1px solid #8B4513;">

                <h3>Global Talent State Management</h3>
                <div class="points-controls">
                    <button class="button danger" onclick="resetAllTalents()">RESET ALL TALENTS</button>
                    <button class="button primary" onclick="exportState()">EXPORT STATE</button>
                    <button class="button primary" onclick="importState()">IMPORT STATE</button>
                </div>

                <a href="index.html" class="back-link">‚Üê Back to Main Menu</a>
            </div>
        </div>
    </div>

    <script type="module">
        // Admin configuration
        const ADMIN_PASSWORD = 'admin123'; // Change this to your desired password
        
        // Check if user is already logged in
        if (sessionStorage.getItem('admin-logged-in') === 'true') {
            showAdminContent();
        }

        function login() {
            const password = document.getElementById('admin-password').value;
            const errorDiv = document.getElementById('login-error');
            
            if (password === ADMIN_PASSWORD) {
                sessionStorage.setItem('admin-logged-in', 'true');
                showAdminContent();
                errorDiv.style.display = 'none';
            } else {
                errorDiv.textContent = 'Invalid password!';
                errorDiv.style.display = 'block';
                document.getElementById('admin-password').value = '';
            }
        }

        function showAdminContent() {
            document.getElementById('login-section').style.display = 'none';
            document.getElementById('admin-content').classList.add('visible');
            updatePointsDisplay();
        }

        function updatePointsDisplay() {
            const points = parseInt(localStorage.getItem('global-talent-points')) || 0;
            document.getElementById('current-points').textContent = points;
        }

        function addPoints() {
            const amount = parseInt(document.getElementById('points-input').value);
            if (isNaN(amount) || amount < 0) {
                showError('Please enter a valid positive number');
                return;
            }
            
            const currentPoints = parseInt(localStorage.getItem('global-talent-points')) || 0;
            const newPoints = currentPoints + amount;
            localStorage.setItem('global-talent-points', newPoints.toString());
            updatePointsDisplay();
            showSuccess(`Added ${amount} points! Total: ${newPoints}`);
            document.getElementById('points-input').value = '';
        }

        function setPoints() {
            const amount = parseInt(document.getElementById('points-input').value);
            if (isNaN(amount) || amount < 0) {
                showError('Please enter a valid positive number');
                return;
            }
            
            localStorage.setItem('global-talent-points', amount.toString());
            updatePointsDisplay();
            showSuccess(`Set points to ${amount}`);
            document.getElementById('points-input').value = '';
        }

        function resetPoints() {
            if (confirm('Are you sure you want to reset all points to 0?')) {
                localStorage.setItem('global-talent-points', '0');
                updatePointsDisplay();
                showSuccess('Points reset to 0');
            }
        }

        function resetAllTalents() {
            if (confirm('Are you sure you want to reset ALL talent trees? This will clear all progress!')) {
                localStorage.clear();
                showSuccess('All talent trees have been reset!');
                updatePointsDisplay();
            }
        }

        function exportState() {
            const state = {
                globalPoints: localStorage.getItem('global-talent-points') || '0',
                blackjackTree: localStorage.getItem('blackjack-talent-tree') || null,
                timestamp: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(state, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `skill-tree-backup-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
            showSuccess('State exported successfully!');
        }

        function importState() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = function(event) {
                const file = event.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const state = JSON.parse(e.target.result);
                        
                        if (state.globalPoints !== undefined) {
                            localStorage.setItem('global-talent-points', state.globalPoints);
                        }
                        if (state.blackjackTree) {
                            localStorage.setItem('blackjack-talent-tree', state.blackjackTree);
                        }
                        
                        updatePointsDisplay();
                        showSuccess('State imported successfully!');
                    } catch (error) {
                        showError('Invalid file format!');
                    }
                };
                reader.readAsText(file);
            };
            
            input.click();
        }

        function showSuccess(message) {
            const div = document.getElementById('success-message');
            div.textContent = message;
            div.style.display = 'block';
            setTimeout(() => div.style.display = 'none', 3000);
        }

        function showError(message) {
            const div = document.getElementById('error-message');
            div.textContent = message;
            div.style.display = 'block';
            setTimeout(() => div.style.display = 'none', 3000);
        }

        // Handle enter key in password field
        document.getElementById('admin-password').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                login();
            }
        });

        // Handle enter key in points input
        document.getElementById('points-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                addPoints();
            }
        });

        // Make functions global
        window.login = login;
        window.addPoints = addPoints;
        window.setPoints = setPoints;
        window.resetPoints = resetPoints;
        window.resetAllTalents = resetAllTalents;
        window.exportState = exportState;
        window.importState = importState;
    </script>
</body>
</html>